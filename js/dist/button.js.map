{"version":3,"file":"button.js","sources":["../src/button.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.4.1): button.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'button'\nconst VERSION             = '4.4.1'\nconst DATA_KEY            = 'bs.button'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst DATA_API_KEY        = '.data-api'\nconst JQUERY_NO_CONFLICT  = $.fn[NAME]\n\nconst ClassName = {\n  ACTIVE : 'active',\n  BUTTON : 'btn',\n  FOCUS  : 'focus'\n}\n\nconst Selector = {\n  DATA_TOGGLE_CARROT   : '[data-toggle^=\"button\"]',\n  DATA_TOGGLES         : '[data-toggle=\"buttons\"]',\n  DATA_TOGGLE          : '[data-toggle=\"button\"]',\n  DATA_TOGGLES_BUTTONS : '[data-toggle=\"buttons\"] .btn',\n  DATA_TOGGLES_INPUTS  : '[data-toggle=\"buttons\"] input:not([type=\"hidden\"])',\n  DATA_TOGGLE_BUTTONS  : '[data-toggle=\"button\"], [data-toggle=\"buttons\"] .btn',\n  INPUT                : 'input:not([type=\"hidden\"])',\n  ACTIVE               : '.active',\n  BUTTON               : '.btn'\n}\n\nconst Event = {\n  CHANGE_DATA_API        : `change${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_DATA_API         : `click${EVENT_KEY}${DATA_API_KEY}`,\n  FOCUS_BLUR_DATA_API    : `focus${EVENT_KEY}${DATA_API_KEY} ` +\n                           `blur${EVENT_KEY}${DATA_API_KEY}`,\n  LOAD_PAGESHOW_DATA_API : `load${EVENT_KEY}${DATA_API_KEY} `+\n                           `pageshow${EVENT_KEY}${DATA_API_KEY}`\n}\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Button {\n  constructor(element) {\n    this._element = element\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  // Public\n\n  toggle() {\n    if (Button._disabled(this._element)) {\n      return\n    }\n\n    const c = !Button._checked(this._element)\n    const input = this._element.querySelector(Selector.INPUT)\n    if (input) {\n      input.checked = c\n      $(input).trigger('change')\n    } else {\n      this._element.setAttribute('aria-pressed', c)\n      Button._update(this._element)\n    }\n  }\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n    this._element = null\n  }\n\n  // Static\n\n  static _update(e) {\n    e.classList.toggle(ClassName.ACTIVE, Button._checked(e))\n  }\n\n  static _checked(e) {\n    const input = e.querySelector(Selector.INPUT)\n    if (input) {\n      return input.checked\n    }\n    return e.getAttribute('aria-pressed') === 'true'\n  }\n\n  static _disabled(e) {\n    if (e.hasAttribute('disabled') || e.classList.contains('disabled')) {\n      return true\n    }\n\n    const input = e.querySelector(Selector.INPUT)\n    return input && (\n      input.hasAttribute('disabled') ||\n      input.classList.contains('disabled')\n    )\n  }\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n      if (!data) {\n        data = new Button(this)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (config === 'toggle') {\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document)\n  .on(Event.CHANGE_DATA_API, Selector.DATA_TOGGLES_INPUTS, function (event) {\n    // Update all related inputs on change.\n    let t = $(this)\n    if (event.target.type === 'radio') {\n      t = t.add(document.getElementsByName(event.target.name))\n    }\n    t.closest(Selector.BUTTON).each(function () {\n      Button._update(this)\n    })\n  })\n  .on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE_CARROT, (event) => {\n    // Find the containing .btn.\n    let btn = $(event.target)\n    if (!btn.hasClass(ClassName.BUTTON)) {\n      btn = btn.closest(Selector.BUTTON)\n    }\n    if (!btn.length) {\n      return\n    }\n\n    // Don't allow disabled buttons to be toggled.\n    if (Button._disabled(btn[0])) {\n      event.preventDefault() // work around Firefox bug #1540995\n      return\n    }\n\n    // label.btn > input will trigger a change event for the same click so we\n    // don't repeat the toggle here.\n    if (event.target.tagName === 'INPUT' || btn.length && btn[0].tagName === 'LABEL') {\n      return\n    }\n\n    // Toggle the btn.\n    Button._jQueryInterface.call(btn, 'toggle')\n\n    // div.btn may not accept focus, so we give it to its input.\n    btn.find(Selector.INPUT).trigger('focus')\n  })\n  .on(Event.FOCUS_BLUR_DATA_API, Selector.DATA_TOGGLE_CARROT, (event) => {\n    // Add/remove class \"focus\" on focus[in]/focusout events.\n    $(event.target)\n      .closest(Selector.BUTTON)\n      .toggleClass(ClassName.FOCUS, /^focus(in)?$/.test(event.type))\n  })\n\n$(window).on(Event.LOAD_PAGESHOW_DATA_API, () => {\n  // Ensure correct active class is set to match the controls' actual values/states.\n  $(Selector.DATA_TOGGLE_BUTTONS).each(function () {\n    Button._update(this)\n  })\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = Button._jQueryInterface\n$.fn[NAME].Constructor = Button\n$.fn[NAME].noConflict = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Button._jQueryInterface\n}\n\nexport default Button\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","ClassName","ACTIVE","BUTTON","FOCUS","Selector","DATA_TOGGLE_CARROT","DATA_TOGGLES","DATA_TOGGLE","DATA_TOGGLES_BUTTONS","DATA_TOGGLES_INPUTS","DATA_TOGGLE_BUTTONS","INPUT","Event","CHANGE_DATA_API","CLICK_DATA_API","FOCUS_BLUR_DATA_API","LOAD_PAGESHOW_DATA_API","Button","element","_element","toggle","_disabled","c","_checked","input","querySelector","checked","trigger","setAttribute","_update","dispose","removeData","e","classList","getAttribute","hasAttribute","contains","_jQueryInterface","config","each","data","document","on","event","t","target","type","add","getElementsByName","name","closest","btn","hasClass","length","preventDefault","tagName","call","find","toggleClass","test","window","Constructor","noConflict"],"mappings":"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"}